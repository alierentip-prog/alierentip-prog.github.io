<!doctype html>
<html lang="tr" data-theme="dark">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Neon Runner</title>
<style>
  :root{--bg:#0b0d10;--fg:#e6f0ff;--brand:#6ee7ff;--mut:#7aa0b5}
  [data-theme="light"]{:root{--bg:#f7fafc;--fg:#0f172a;--brand:#0ea5e9;--mut:#475569}}
  html,body{height:100%}
  body{margin:0;background:radial-gradient(1200px 600px at 50% -200px,rgba(110,231,255,.15),transparent),var(--bg);color:var(--fg);font:16px/1.5 system-ui,Segoe UI,Inter,Roboto,Arial}
  .wrap{max-width:900px;margin:0 auto;padding:16px}
  .hud{display:flex;gap:16px;align-items:center;justify-content:center;margin:12px auto 8px}
  .pill{padding:8px 14px;border:1px solid rgba(255,255,255,.08);border-radius:999px;background:rgba(255,255,255,.03);backdrop-filter: blur(6px)}
  .pill b{color:var(--brand)}
  /* Oyun alanÄ± */
  #game{position:relative;height:520px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(to bottom,rgba(255,255,255,.02),transparent 140px),rgba(255,255,255,.02);overflow:hidden;box-shadow:0 0 0 1px rgba(255,255,255,.03) inset}
  /* Zemin Ã§izgisi */
  .ground{position:absolute;left:0;right:0;bottom:100px;height:2px;background:linear-gradient(90deg,transparent 0 20%,rgba(110,231,255,.45) 40%,transparent 60%);filter:drop-shadow(0 0 6px rgba(110,231,255,.6))}
  /* Oyuncu */
  .player{position:absolute;left:60px;bottom:102px;width:46px;height:46px;background:#67e8f9;border-radius:8px;box-shadow:0 0 20px 6px rgba(110,231,255,.35)}
  /* Engel */
  .obs{position:absolute;bottom:102px;width:28px;height:48px;background:#94a3b8;border-radius:6px;box-shadow:0 0 16px rgba(148,163,184,.35)}
  .obs.tall{height:80px}
  /* BaÅŸla ipucu */
  .hint{position:absolute;inset:0;display:grid;place-items:center;color:var(--mut);font-weight:600;letter-spacing:.4px}
  .btn{cursor:pointer}
  /* Game over etiketi */
  .overlay{position:absolute;inset:0;display:none;place-items:center;background:linear-gradient(to bottom,rgba(0,0,0,.2),rgba(0,0,0,.4));backdrop-filter:blur(2px)}
  .card{padding:18px 22px;border-radius:12px;background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.08);text-align:center}
  .card h3{margin:0 0 8px}
  .card .btn{display:inline-block;margin-top:8px;padding:8px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.1)}
</style>
</head>
<body>
<div class="wrap">
  <div class="hud">
    <div class="pill">Skor: <b id="score">0</b></div>
    <div class="pill">Â·</div>
    <div class="pill">En iyi: <b id="best">0</b></div>
  </div>

  <div id="game" class="game btn" aria-label="ZÄ±plamak iÃ§in dokun / boÅŸluk">
    <div class="hint" id="hint">Dokun ya da BoÅŸluk/â†‘ ile zÄ±pla</div>
    <div class="ground"></div>
    <div id="player" class="player"></div>
    <div id="over" class="overlay">
      <div class="card">
        <h3>ðŸ’¥ Ã‡arpÄ±ÅŸma!</h3>
        <div>Skor: <b id="final">0</b> Â· En iyi: <b id="finalBest">0</b></div>
        <div class="btn" id="again">Tekrar Oyna</div>
      </div>
    </div>
  </div>
</div>

<script>
(()=> {
  // ====== DOM ======
  const game = document.getElementById('game');
  const player = document.getElementById('player');
  const scoreEl = document.getElementById('score');
  const bestEl  = document.getElementById('best');
  const hint   = document.getElementById('hint');
  const over   = document.getElementById('over');
  const final  = document.getElementById('final');
  const finalBest = document.getElementById('finalBest');
  const again  = document.getElementById('again');

  // ====== Oyun durumu ======
  let running = false;
  let tPrev = 0;
  let score = 0;
  let best = Number(localStorage.getItem('neon_best') || 0);
  bestEl.textContent = best;

  // Fizik
  let x = 60;             // sabit (solda)
  let y = 0;              // zemin ofseti
  let vy = 0;             // hÄ±z
  const G = -2400;        // yerÃ§ekimi (px/s^2)
  const JUMP_V = 820;     // zÄ±plama hÄ±zÄ±
  const GROUND = 0;       // referans

  // Engel listesi
  /** @type {{el:HTMLElement, x:number, w:number, h:number}[]} */
  let obs = [];
  let spawnTimer = 0;

  // YardÄ±mcÄ±lar
  function clamp(v,min,max){return v<min?min:v>max?max:v}
  function rnd(a,b){return Math.random()*(b-a)+a}

  // BaÅŸlat / reset
  function reset(){
    score = 0;
    scoreEl.textContent = '0';
    vy = 0; y = 0;
    obs.forEach(o=>o.el.remove()); obs = [];
    spawnTimer = 0;
    over.style.display='none';
  }

  function start(){
    if (running) return;
    reset();
    running = true;
    hint.style.display='none';
  }

  function gameOver(){
    running = false;
    over.style.display='grid';
    final.textContent = Math.floor(score);
    if (score > best){ best = Math.floor(score); localStorage.setItem('neon_best', best) }
    bestEl.textContent = best;
    finalBest.textContent = best;
  }

  // ZÄ±plama
  function jump(){
    if (!running) start();
    // zemine yakÄ±nsa zÄ±pla (Ã§ift zÄ±plamayÄ± engelle)
    if (y <= GROUND + 2){
      vy = JUMP_V;
    }
  }

  // GiriÅŸ
  game.addEventListener('pointerdown', jump);
  window.addEventListener('keydown', e=>{
    if(e.code==='Space' || e.code==='ArrowUp' || e.key===' '){ e.preventDefault(); jump(); }
    if(e.code==='KeyR'){ reset(); running=true; }
  });
  again.addEventListener('click', ()=>{ reset(); running=true; });

  // Engel oluÅŸtur
  function spawn(){
    const el = document.createElement('div');
    const tall = Math.random()<0.35;
    el.className = 'obs' + (tall ? ' tall' : '');
    game.appendChild(el);
    const w = 28, h = tall?80:48;
    const xPos = game.clientWidth + w + 10;
    obs.push({ el, x:xPos, w, h });
  }

  // Ana dÃ¶ngÃ¼
  function loop(now){
    requestAnimationFrame(loop);    // HER KAREDE Ã§alÄ±ÅŸ

    const dt = Math.min(1/30, (now - tPrev)/1000 || 0); // saniye
    tPrev = now;

    if (!running) return;

    // Fizik (yukarÄ± +)
    vy += G * dt;
    y += vy * dt;
    if (y < GROUND){ y = GROUND; vy = 0; } // yere deÄŸdi

    // Oyuncu konumu (CSS bottom)
    player.style.bottom = (102 + y) + 'px';

    // Engelleri gÃ¼ncelle
    const speed = 320; // px/s
    spawnTimer -= dt;
    if (spawnTimer <= 0){
      spawn(); spawnTimer = rnd(1.0, 1.8);
    }

    for (let i=obs.length-1;i>=0;i--){
      const o = obs[i];
      o.x -= speed * dt;
      if (o.x < -60){ o.el.remove(); obs.splice(i,1); continue; }
      o.el.style.transform = `translateX(${o.x}px)`;
      // Ã‡arpÄ±ÅŸma (basit AABB)
      const px = x, pw = 46, ph = 46 + y;
      const ox = o.x, ow = o.w, oh = o.h;
      // player rect
      const pLeft = px, pRight = px+pw, pBottom = 102, pTop = 102+46+y;
      const oLeft = ox+60, oRight = oLeft+ow, oBottom = 102, oTop = 102+oh;
      const collide = !(pRight < oLeft || pLeft > oRight || pTop < oBottom || pBottom > oTop);
      if (collide){ gameOver(); }
    }

    // skor
    score += dt*10;
    scoreEl.textContent = Math.floor(score);
  }

  // BaÅŸlat dÃ¶ngÃ¼
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
