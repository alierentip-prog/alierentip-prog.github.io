<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AZURA • Kullanıcı Paneli</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap" rel="stylesheet" />
<style>
  :root{
    --accent:#00b4ff;
    --accent-soft:#6ad7ff;
    --bg-dark:#05080c;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:'Cinzel',serif;background:#fff;overflow:hidden}

  /* ---------- LOADER ---------- */
  .loader{
    position:fixed; inset:0; background:radial-gradient(1200px 800px at 50% 25%, #0c141f 0%, #070b12 50%, var(--bg-dark) 100%);
    display:grid; place-items:center; z-index:9998;
  }
  .loader-inner{position:relative; width:min(92vw,680px); height:min(92vw,680px);}
  canvas#ring{position:absolute; inset:0; width:100%; height:100%}
  .brand{
    position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;
    filter: drop-shadow(0 0 24px rgba(0,180,255,.25));
  }
  .brand h1{
    margin:0; letter-spacing:.14em; font-weight:700;
    background:linear-gradient(180deg,#ffffff 0%, #e7fbff 55%, #c7f3ff 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 0 18px rgba(0,180,255,.18);
    font-size:clamp(44px, 11.2vw, 136px);
  }
  .brand.flicker h1{ animation:flicker .6s linear 3 }
  @keyframes flicker{
    0%,100%{opacity:1; filter:drop-shadow(0 0 22px rgba(0,180,255,.35))}
    20%,60%{opacity:.35; filter:none}
    40%,80%{opacity:.9}
  }

  .skip{
    position:fixed; right:14px; top:14px; z-index:9999;
    padding:8px 12px; border-radius:10px; font-weight:700; letter-spacing:.02em;
    color:#dff6ff; background:rgba(0,40,60,.45); border:1px solid rgba(120,200,255,.25);
    backdrop-filter: blur(6px); cursor:pointer;
  }
  .skip:hover{background:rgba(0,60,90,.55)}

  #flash{position:fixed; inset:0; background:#fff; opacity:0; transition:opacity .42s ease; z-index:9997}

  /* ---------- PANEL ---------- */
  #panel{visibility:hidden; position:relative; z-index:1; min-height:100vh; display:flex;}

  .sidebar{
    width:260px; background:#0e3e33; color:#ecfff7; padding:20px; display:flex; flex-direction:column; gap:16px;
    box-shadow:inset -1px 0 0 rgba(255,255,255,.08);
  }
  .sidebar h2{margin:2px 0 10px; text-align:center; color:#a5ffd6; letter-spacing:.12em}
  .sidebar button{
    background:#145444; border:none; padding:12px; color:#ecfff7; border-radius:10px; cursor:pointer;
    transition:transform .18s, background .18s;
  }
  .sidebar button:hover{background:#16705a; transform:translateY(-2px)}

  .main{
    flex:1; padding:36px; background:linear-gradient(180deg,#ffffff 0%, #fafafa 100%);
    overflow-y:auto;
  }
  .main h1{color:#13493c; letter-spacing:.08em; margin-top:6px}
  .card{
    background:#fff; border:1px solid #e6e6e6; border-radius:14px;
    box-shadow:0 10px 24px rgba(0,0,0,.06);
    padding:20px; margin-bottom:18px; transition:transform .18s, box-shadow .18s;
  }
  .card:hover{transform:translateY(-3px); box-shadow:0 14px 28px rgba(0,0,0,.09)}
  .chip{display:inline-block; padding:6px 10px; border-radius:999px; background:#f2fff8; color:#0f684f; border:1px solid #c8f3de; font-size:12px; margin-right:6px}

  /* Reduced motion: loader sadeleşsin */
  @media (prefers-reduced-motion: reduce){
    .brand h1{filter:none; text-shadow:none}
  }
</style>
</head>
<body>

<!-- LOADER -->
<div class="loader" id="loader">
  <button class="skip" id="skipBtn">Geç</button>
  <div class="loader-inner">
    <canvas id="ring"></canvas>
    <div class="brand" id="brand"><h1>AZURA</h1></div>
  </div>
</div>
<div id="flash"></div>

<!-- PANEL -->
<div id="panel">
  <div class="sidebar">
    <h2>AZURA Panel</h2>
    <button>🏠 Akış</button>
    <button>🔍 Keşfet</button>
    <button>👥 Topluluk</button>
    <button>📚 Kaynaklar</button>
    <button>📝 Notlar</button>
    <button>⚙️ Ayarlar</button>
  </div>
  <div class="main">
    <h1>Hoş geldin, Kullanıcı!</h1>
    <div class="card"><h3>🌿 Bugünkü Aktivite</h3><p>Disiplin modundayım. 30 dk çalışma tamamlandı!</p><span class="chip">Odak</span><span class="chip">20 dk</span></div>
    <div class="card"><h3>💡 Günün Sözü</h3><p>"Söz verdiğim şeyi takvime yazıyorum." — Küçük not.</p></div>
    <div class="card"><h3>🔥 Güncel Gönderiler</h3><ul><li>Yeni tasarım hazır!</li><li>Panel teması geliştirildi.</li><li>Yılan efekti optimize edildi.</li></ul></div>
  </div>
</div>

<script>
/* =======================
   1) CANVAS "YILAN" LOADER
   ======================= */
const canvas = document.getElementById('ring');
const ctx = canvas.getContext('2d', { alpha: true });
const brand = document.getElementById('brand');
const loader = document.getElementById('loader');
const flash  = document.getElementById('flash');
const panel  = document.getElementById('panel');
const skipBtn= document.getElementById('skipBtn');

let W, H, CX, CY, R;
function fit(){
  const rect = loader.getBoundingClientRect();
  canvas.width  = rect.width;
  canvas.height = rect.height;
  W = canvas.width; H = canvas.height;
  CX = W/2; CY = H/2;
  R = Math.min(W, H) * 0.33; // halka yarıçapı (büyük)
}
fit(); addEventListener('resize', fit);

// Parametreler
const DOTS = 32;          // sabit nokta sayısı (daha seyrek)
const TRAIL = 20;         // kuyruğun uzunluğu
const SPEED = 0.027;      // açısal hız (daha yavaş/agresif)
const HEAD_SIZE = 15;     // yılan başı yarıçap
const BASE_DOT = 3.2;     // sabit nokta yarıçapı
const GLOW = '#00b4ff';

let angle = -Math.PI * 0.48; // üst sol başlangıç
let last = performance.now();
let turns = 0;
let finished = false;

// sabit noktaların önceden hesaplanmış yerleri
const fixed = [];
function computeFixed(){
  fixed.length = 0;
  for(let i=0;i<DOTS;i++){
    const a = i/DOTS * Math.PI*2;
    fixed.push([CX + Math.cos(a)*R, CY + Math.sin(a)*R]);
  }
}
computeFixed();

// reduced-motion ise animasyonu sadeleştir
const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

function draw(now){
  const dt = (now - last) / 1000; last = now;
  ctx.clearRect(0,0,W,H);

  // sabit noktalar (soluk)
  ctx.save();
  ctx.globalAlpha = 0.23;
  ctx.fillStyle = '#87d8ff';
  for(const [x,y] of fixed){ ctx.beginPath(); ctx.arc(x,y,BASE_DOT,0,Math.PI*2); ctx.fill(); }
  ctx.restore();

  // yılan kuyruğu
  ctx.globalCompositeOperation = 'lighter';
  for(let j=0;j<TRAIL;j++){
    const a = (angle - j*0.10);
    const x = CX + Math.cos(a)*R;
    const y = CY + Math.sin(a)*R;
    const k = 1 - (j/TRAIL);
    ctx.beginPath();
    ctx.shadowColor = GLOW;
    ctx.shadowBlur  = 28*k;
    ctx.fillStyle   = `rgba(0,180,255,${0.85*k})`;
    ctx.arc(x,y, HEAD_SIZE*(0.86 + 0.08*k), 0, Math.PI*2);
    ctx.fill();
  }
  ctx.globalCompositeOperation = 'source-over';

  // İlerleme
  angle += SPEED * (reduceMotion? 0.4 : 1);
  if(angle >= Math.PI*2){ angle -= Math.PI*2; turns++; }

  if(!finished) requestAnimationFrame(draw);
}
requestAnimationFrame(draw);

/* =======================
   2) ZAMANLAMA & GEÇİŞ
   ======================= */
// 3–4 tur + minimum süre
const MIN_MS = 1900;
const TARGET_TURNS = 3.4;

const start = performance.now();
let endTimer;

function tryFinish(){
  const enoughTime  = performance.now() - start >= MIN_MS;
  const enoughTurns = turns >= TARGET_TURNS;
  if(enoughTime && enoughTurns){
    // Flicker (logo çakar)
    brand.classList.add('flicker');
    // 600ms sonra geçiş
    endTimer = setTimeout(()=> {
      finished = true;
      flash.style.opacity = 1;                // beyaz wipe
      setTimeout(()=>{
        loader.remove();                      // loader kaldır
        flash.style.opacity = 0;
        panel.style.visibility = 'visible';   // paneli göster
        setTimeout(()=>flash.remove(), 450);
        document.body.style.overflow = 'auto';
      }, 380);
    }, 650);
  } else {
    requestAnimationFrame(tick);
  }
}
function tick(){ tryFinish(); }
requestAnimationFrame(tick);

// Skip
skipBtn.addEventListener('click', () => {
  finished = true;
  if(endTimer) clearTimeout(endTimer);
  flash.style.opacity = 1;
  setTimeout(()=>{
    loader.remove(); flash.style.opacity = 0; panel.style.visibility='visible';
    setTimeout(()=>flash.remove(), 450);
    document.body.style.overflow='auto';
  }, 280);
});
</script>
</body>
</html>
